function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}deleteDataSource=function(b,a){var d=confirm("Are you sure you want to delete "+a+"?");if(d==true){blockUpdate();var c=$.post("/tcj/aa",{ds:b,a:"dds"},function(e){window.location="/tcj/analytics/data_sources_manage.jsp"},"html")}};deleteAccount=function(a,b){var d=confirm("Are you sure you want to delete "+b+"?\n(This will delete everything owned by this user).");if(d==true){blockUpdate();var c=$.post("/tcj/aa",{uid:a,a:"du"},function(e){window.location="/tcj/analytics/accounts_manage.jsp"},"html")}};isInteger=function(a){return a%1===0};var i_idle=0;var b_idle=1;var i_timeout=30;var i_timout_increment=60000;lala=function(){assignAbsolutes();var e=setInterval(timerIncrement,i_timout_increment);$(this).mousemove(function(f){i_idle=0});$(this).keypress(function(f){i_idle=0});$(window).resize(function(){assignAbsolutes();if($("#iframe_visual").length>0){resizeVisual()}if($("#iframe_0").length>0){resizeData()}});if($("#t_analytics_manage").length>0){var b=$("#t_analytics_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowanalyticsmanage","oddrowanalyticsmanage"]},headers:{0:{sorter:false},3:{sorter:false},4:{sorter:false},5:{sorter:false},6:{sorter:false}}})}else{if($("#t_events_manage").length>0){var d=$("#t_events_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenroweventsmanage","oddroweventsmanage"]},headers:{3:{sorter:false},4:{sorter:false},5:{sorter:false}}})}else{if($("#t_accounts_manage").length>0){var c=$("#t_accounts_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenroweventsmanage","oddroweventsmanage"]},headers:{}})}else{if($("#t_results_manage").length>0){var d=$("#t_results_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowresultsmanage","oddrowresultsmanage"]},headers:{5:{sorter:false}}})}else{if($("#t_load_results_manage").length>0){var d=$("#t_load_results_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowresultsmanage","oddrowresultsmanage"]},headers:{5:{sorter:false}}})}else{if($("#t_data_sources_manage").length>0){var d=$("#t_data_sources_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowdatasourcesmanage","oddrowdatasourcesmanage"]},headers:{3:{sorter:false},4:{sorter:false},5:{sorter:false}}})}else{if($("#t_history_manage").length>0){var a=$("#t_history_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowdatasourcesmanage","oddrowdatasourcesmanage"]},headers:{0:{sorter:false}}})}else{if($("#t_data_worlds_manage").length>0){var d=$("#t_data_worlds_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowdatasourcesmanage","oddrowdatasourcesmanage"]},headers:{3:{sorter:false},4:{sorter:false}}})}else{if($("#t_segments_manage").length>0){var d=$("#t_segments_manage").tablesorter({theme:"blue",widgets:["zebra"],widgetOptions:{zebra:["evenrowdatasourcesmanage","oddrowdatasourcesmanage"]},headers:{2:{sorter:false},3:{sorter:false}}})}}}}}}}}}$(".button").hover(function(){$(this).css("background","#E6EEEE")},function(){$(this).css("background","#eeeeee")});setInterval(function(){if($("#t_results_manage").length>0){getAnalysisStatus()}else{if($("#t_load_results_manage").length>0){getLoadStatus()}}},5000);$(".select_normal").select2({dropdownAutoWidth:true});$(".select_normal_nosearch").select2({minimumResultsForSearch:-1,dropdownAutoWidth:true});$(".select_normal_nosearch_menu").select2({minimumResultsForSearch:-1,dropdownAutoWidth:true})};function timerIncrement(){}var i_workspace_width=0;var i_paths_flow_width=0;var i_absolutes_assigned=0;function assignAbsolutes(){var e=$(window).width();var b=(e-200);var h=$(window).height();var g=$(document).width();var d=$(document).height();var a=$(document).scrollTop();var f=$(document).scrollLeft();i_workspace_width=(e);i_paths_flow_width=(i_workspace_width-200);$("#div_content").css("display","");$("#div_body").css("width",(e)+"px");$("#div_nav").css("left","62px");$("#div_nav").css("width",i_workspace_width+"px");$("#div_results_container").css("width",(i_workspace_width-10)+"px");$("#div_content").css("width",e+"px");$("#div_paths").css("width",i_workspace_width+"px");$("#div_paths_content").css("width",(i_workspace_width-40)+"px");$("#div_paths_content").css("height",($(window).outerHeight(true)-100-20));$("#div_tree").css("width",(i_workspace_width-40)+"px");$("#div_tree_container").css("width",(i_workspace_width-40)+"px");$("#div_paths_compare").css("width",i_workspace_width+"px");$("#div_paths_content_compare").css("width",(i_workspace_width-40)+"px");$("#div_paths_content_compare").css("height",($(window).outerHeight(true)-100-10));$("#div_tree_compare").css("width",(i_workspace_width-40)+"px");$("#div_tree_container_compare").css("width",(i_workspace_width-40)+"px");$("#div_flow").css("width",i_workspace_width+"px");$("#div_flow_content").css("width",(i_workspace_width-40)+"px");$("#div_flow_content").css("height",($(window).outerHeight(true)-20));$("#div_flow_container").css("height",($(window).outerHeight(true)-20));$("#div_flow_chart").css("height",($(window).outerHeight(true)-20));i_width_sankey=(i_workspace_width-40);$("#div_flow_slider").css("width",(i_width_sankey-568)+"px");$("#slider-range-flow").css("width",(i_width_sankey-118)+"px");if($("#div_flow_filter").length>0){if($("#div_flow_filter").css("display")=="none"){$("#slider-range-flow").css("width",(i_width_sankey-118)+"px")}else{$("#slider-range-flow").css("width",(i_width_sankey-618)+"px")}}var c=$("#div_content_container").position();i_absolutes_assigned=1}function resizeVisual(a){var c=$(window).width();var b=(c-315);var e=$(window).height();var d=(e-160);if($("#sel_part_filter").length>0||$("#s_segment_id").length>0){$("#iframe_visual").css({width:b+"px",height:(d-40)+"px"})}else{$("#iframe_visual").css({width:b+"px",height:d+"px"})}$("#iframe_visual").attr("src",a);$("#div_spinner").css("display","none");$("#iframe_visual").css("display","")}function resizeDrillDownContainer(){var b=$(window).width();var a=(b-315);var d=$(window).height();var c=(d-160);$("#div_drilldown_container").css({width:a+"px",display:""})}popOut=function(){window.open($("#iframe_visual").attr("src"))};function resizeData(){var b=$(window).width();var a=(b-315);var d=$(window).height();var c=(d-180);$("#iframe_0").css({width:a+"px",height:c+"px"});$("#iframe_0").css("display","")}function resizeIframe(a){a.style.height=a.contentWindow.document.body.scrollHeight+"px"}navPullDown=function(b){if(b=="ON"){var a=$("#div_nav_workspace").position();$("#div_nav_pulldown").css("top",(a.top+20)+"px");$("#div_nav_pulldown").css("left",a.left+"px");$("#div_nav_pulldown").css("z-index",200);$("#div_nav_pulldown").css("display","")}else{$("#div_nav_pulldown").css("display","none")}};interfacePullDown=function(a){};sankeyColorsPullDown=function(b){if(b=="ON"){var a=$("#div_btn_sankey_colors").position();$("#div_sankey_colors_pulldown").css("top",(a.top+20)+"px");$("#div_sankey_colors_pulldown").css("left",(a.left+12)+"px");$("#div_sankey_colors_pulldown").css("z-index",200);$("#div_sankey_colors_pulldown").css("display","")}else{$("#div_sankey_colors_pulldown").css("display","none")}};navDataSourcePullDown=function(b){if(b=="ON"){var a=$("#div_nav_data_source").position();$("#div_nav_data_source_pulldown").css("position","fixed");$("#div_nav_data_source_pulldown").css("top","24px");$("#div_nav_data_source_pulldown").css("left",(a.left-27)+"px");$("#div_nav_data_source_pulldown").css("z-index",2000);$("#div_nav_data_source_pulldown").css("display","")}else{$("#div_nav_data_source_pulldown").css("display","none")}};blockUpdate=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({baseZ:1000,message:$("#div_display_box"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockBackgroundRun=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_background"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockQueryError=function(a){if(a==""){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_pop_zero_paths"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-420)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})}else{$("#div_error_message").html(a);$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_pop_error"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})}};blockHistoryRun=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_history"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockBackgroundTargetSelectRun=function(){var d=$("#s_direction").val();var a=0;var b=0;for(var c=0;c<a_target_paths.length;c++){var e=a_target_paths[c].replace(/['\[\]\^%]/g,"").split(", ");if($.inArray(root.name,e)!=-1){a++}else{b++}}if(a==0&&d=="endevent"){$("#div_no_history").css("display","");$("#div_no_history_message").html("Only include customers with no history of:<br><b>"+$("#s_event").val()+"</b>")}else{$("#div_no_history").css("display","none")}$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_target_select_background"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-360)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockBackgroundTargetRun=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_target_background"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockBackgroundReportSelectRun=function(){var e=$("#s_direction").val();var a=0;var b=0;for(var d=0;d<a_target_id_paths.length;d++){var c=JSON.parse("["+a_target_id_paths[d]+"]");if($.inArray(root.id,c)!=-1){a++}else{b++}}if(a==0&&e=="endevent"){$("#div_no_history").css("display","");$("#div_no_history_message").html("Only include customers with no history of:<br><b>"+$("#s_event").val()+"</b>")}else{$("#div_no_history").css("display","none")}$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_report_select_background"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-360)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockBackgroundReportRun=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_report_background"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};setBackgroundRun=function(){x_raf.abort();window.location="/tcj/analytics/history_manage.jsp"};var i_background_target_run=0;setBackgroundTargetRun=function(){i_background_target_run=1;$("#div_sidebar_target").html('<img src="/tcj/images/sidebar_target_cccccc_ani.gif" width="40">');var a='<div style="float: left; width: 220px; padding-left: 20px;"><div style="clear: both; width: 0px; height: 10px;"></div><div style="float: left; width: 40px; height: 35px; background: #333333;"><img src="/tcj/images/sidebar_target_cccccc_ani.gif" width="40 height="35"></div><div style="float: left; width: 15px; height: 1px;"></div><div style="float: left; width: 110px; vertical-align: top; text-align: left; color: #ffffff;">You will see this icon on the menu while the target list is being built.</div><div style="clear: both; width: 0px; height: 10px;"></div><div style="float: left; width: 40px; height: 35px; background: #EC881D;"><img src="/tcj/images/sidebar_target_cccccc.png" width="40" height="35"></div><div style="float: left; width: 15px; height: 1px;"></div><div style="float: left; width: 110px; vertical-align: top; text-align: left; color: #ffffff;">You will see this icon on the menu when the target list is done.</div><div style="clear: both; width: 0px; height: 20px;"></div></div><br><br><input type="button" value="HIDE" style="width: 160px; height: 20px; font-weight: 500; background: #eeeeee; border: solid 1px #333333; cursor: pointer;" onclick="$.unblockUI();"><br><br>';$("#div_display_box_target_background").html(a)};setBackgroundReportRun=function(){i_background_target_run=1;$("#div_sidebar_report").html('<img src="/tcj/images/sidebar_dashboard_cccccc_ani.gif" width="30">');var a='<div style="float: left; width: 220px; padding-left: 20px;"><div style="clear: both; width: 0px; height: 10px;"></div><div style="float: left; width: 40px; height: 35px; background: #333333;"><img src="/tcj/images/sidebar_dashboard_cccccc_ani.gif" width="40" height="35"></div><div style="float: left; width: 15px; height: 1px;"></div><div style="float: left; width: 110px; vertical-align: top; text-align: left; color: #ffffff;">You will see this icon on the menu while the report is being built.</div><div style="clear: both; width: 0px; height: 10px;"></div><div style="float: left; width: 40px; height: 35px; background: #EC881D;"><img src="/tcj/images/sidebar_dashboard_cccccc.png" width="40" height="35"></div><div style="float: left; width: 15px; height: 1px;"></div><div style="float: left; width: 110px; vertical-align: top; text-align: left; color: #ffffff;">You will see this icon on the menu when the report is done.</div><div style="clear: both; width: 0px; height: 20px;"></div></div><br><br><input type="button" value="HIDE" style="width: 160px; height: 20px; font-weight: 500; background: #eeeeee; border: solid 1px #333333; cursor: pointer;" onclick="$.unblockUI();"><br><br>';$("#div_display_box_report_background").html(a)};blockSettingsPopulate=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_settings_populate"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockPermissionsCheck=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_settings_check"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockPermissionsPopulate=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_permissions_populate"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockDataSourceGrab=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_display_box_data_source_grab"),css:{top:($(window).height()-200-100)/2+"px",left:($(window).width()-200)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};var s_event_name_current="";var s_event_current="";var s_event_type_current="";blockEventDefine=function(a,b,c){s_event_name_current=a;s_event_current=b;s_event_type_current=c;$("#t_event_name").val(a);$("#condition_0_0").val("EQUAL TO");$("#value_0_0").val(b);$("#h_event_value").val(b);$("#div_event_value").html(b);$('select[name="s_event_type"]').find('option[value="'+c+'"]').attr("selected",true);$("#r_event_create_mode_new").prop("checked",true);$("#div_form_new_event").css("display","");$("#div_form_add_to_event").css("display","none");if($("#div_event_include").length>0){$("#div_event_include").css("display","");var d=$.post("/tcj/aa",{a:"geteventsbyeventtype",et:s_event_type_current},function(e){$("#div_s_event_id").html(e.select);if(e.count==0){$("#div_event_include").css("display","none")}},"json")}i_filter_index=1;$("#filter_count").val(i_filter_index);$("#b_minus").css("display","none");$("[id^='div_filter_']").each(function(){var e=this.id.substring(11);if(isInteger(e)&&e>0){$("#div_filter_"+e).remove()}});$("#f_form_event input").each(function(){$(this).css({backgroundColor:"#eeeeee"});$(this).css({color:"#333333"})});$("#f_form_event select").each(function(){$(this).css({backgroundColor:"#eeeeee"});$(this).css({color:"#333333"});$("#f_form_event input[id*='_parens_']").val("")});if($("#div_no_error_spacer").length>0){$("#div_no_error_spacer").css("display","");$("#div_error_spacer").css("display","none");$("#div_error_message").html('<div style="float: left;">Please correct the errors highlighted in red below:</div><div style="clear: both; height: 6px; width: 1px;"></div>')}$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_event_define"),css:{top:"100px",left:($(window).width()-840)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};function isInteger(a){return a%1===0}blockAnalyticsNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_analytics_next"),css:{top:($(window).height()-240-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockResultsEventsNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_results_event_define_next"),css:{top:($(window).height()-240-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockDashboardNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_dashboard_next"),css:{top:($(window).height()-260-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockDataSourceNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_data_source_next"),css:{top:($(window).height()-260-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockEventsNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_events_next"),css:{top:($(window).height()-340-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}});var b=$("#div_first_5").width();var a=$("#div_last_5").width();if(b>a){$("#div_last_5").css("width",b+"px")}else{$("#div_first_5").css("width",a+"px")}$("#div_events_next_controls").css("visibility","visible")};blockImportNext=function(){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_import_next"),css:{top:($(window).height()-340-65)/2+"px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}});var b=$("#div_first_5").width();var a=$("#div_last_5").width();if(b>a){$("#div_last_5").css("width",b+"px")}else{$("#div_first_5").css("width",a+"px")}$("#div_events_next_controls").css("visibility","visible")};blockAccountEdit=function(a,c,d,b){$("#div_no_error_spacer").css("display","");$("#div_error_spacer").css("display","none");$("#div_account_edit").css("height","auto");$("input[id^='t_']").css({backgroundColor:"#eeeeee",color:"#333333"});$("#t_username").prop("disabled",false);if(a==0){$("#div_welcome_account").html("CREATE NEW USER");$("#t_username").val("");$("#t_name").val("");$("#uid").val("0");$("#s_data_source_id").val("0")}else{$("#div_welcome_account").html("EDIT USER");$("#t_username").val(c);$("#t_username").prop("disabled",true);$("#t_name").val(d);$("#uid").val(a);$("#s_data_source_id").val(b)}$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_account_edit"),css:{top:"100px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}})};blockAccessDisabled=function(a){$.blockUI.defaults.overlayCSS.opacity=0.9;$.blockUI.defaults.css={};$.blockUI({message:$("#div_access_disabled"),css:{top:"100px",left:($(window).width()-720)/2+"px"},overlayCSS:{backgroundColor:"#333333"}});if(a=="data"){$("#div_access_disabled_message").html("Sorry, connecting to other data sources is not available in the demo version of the Path Analysis GAI.")}else{if(a=="account"){$("#div_access_disabled_message").html("Sorry, changing account settings is not available in the demo version of the Path Analysis GAI.")}else{if(a=="data_filter"){$("#div_access_disabled_message").html("Sorry, the data filter functionality is not available in the demo version of the Path Analysis GAI.");$("#cb_filter").attr("checked",false);$("#cb_filter_compare").attr("checked",false)}}}};toggleDataView=function(a){for(var b=0;b<a_data_divs.length;b++){$("#"+a_data_divs[b]).css("display","none")}$("#"+a).css("width",i_workspace_width+"px");$("#"+a).css("display","");assignAbsolutes();refreshTableSorter()};
